---
- name: create home dir for tool account '{{ tool_account.name }}'
  become: true
  ansible.builtin.file:
    path: /data/project/{{ tool_account.name }}
    state: directory
    mode: "0777"
    owner: "{{ tool_account.name }}"
    group: "{{ tool_account.name }}"

- name: install files for tool account '{{ tool_account.name }}'
  become: true
  ansible.builtin.copy:
    dest: /data/project/{{ tool_account.name }}/{{ item.name }}
    content: "{{ item.content }}"
    mode: "{{ item.mode }}"
    owner: "{{ tool_account.name }}"
    group: "{{ tool_account.name }}"
  loop: "{{ tool_account.files }}"
  loop_control:
    label: "{{ item.name }}"
  when: tool_account.files is defined
